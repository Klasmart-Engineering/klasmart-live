syntax = "proto3";

import "state.proto";

message Action {
    uint32 action_count = 0;
    RoomAction actions = 1;

}

message RoomAction {
    map<string, User> teachers = 0;
    map<string, User> students = 1;
    string host = 2;
    Content content = 3;
    uint32 endTimestamp = 4;
}

message UserAction {
    string name = 0;
    
    map<string, Device> devices = 1;
    repeated string removeDeviceIDs = 2;

    repeated Trophy trophies = 3;
    repeated ChatMessage chatMessages = 4;
}

message DeviceAction {
    string activityId = 0;
    string activityStreamId = 1;

    map<string, WebRTCStreamAction> webRTCStreams = 2;
    repeated string removeWebRTCStreamIDs = 3;
}

message WebRTCStreamAction {
    string label = 0;

    map<string, WebRTCTrack> tracks = 1;
    repeated string removeTrackIDs = 2;
}
